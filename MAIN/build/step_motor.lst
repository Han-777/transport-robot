ARM GAS  C:\Users\blue\AppData\Local\Temp\ccxiCAXf.s 			page 1


   1              		.cpu cortex-m7
   2              		.arch armv7e-m
   3              		.fpu fpv5-d16
   4              		.eabi_attribute 28, 1
   5              		.eabi_attribute 20, 1
   6              		.eabi_attribute 21, 1
   7              		.eabi_attribute 23, 3
   8              		.eabi_attribute 24, 1
   9              		.eabi_attribute 25, 1
  10              		.eabi_attribute 26, 1
  11              		.eabi_attribute 30, 1
  12              		.eabi_attribute 34, 1
  13              		.eabi_attribute 18, 4
  14              		.file	"step_motor.c"
  15              		.text
  16              	.Ltext0:
  17              		.cfi_sections	.debug_frame
  18              		.section	.text.StepMotorInit,"ax",%progbits
  19              		.align	1
  20              		.global	StepMotorInit
  21              		.syntax unified
  22              		.thumb
  23              		.thumb_func
  25              	StepMotorInit:
  26              	.LVL0:
  27              	.LFB185:
  28              		.file 1 "modules/motor/step_motor/step_motor.c"
   1:modules/motor/step_motor/step_motor.c **** #include "step_motor.h"
   2:modules/motor/step_motor/step_motor.c **** #include <stdlib.h>
   3:modules/motor/step_motor/step_motor.c **** #include <string.h>
   4:modules/motor/step_motor/step_motor.c **** 
   5:modules/motor/step_motor/step_motor.c **** static StepMotorInstance *step_motor_instance[STEP_MOTOR_CNT] = {NULL};
   6:modules/motor/step_motor/step_motor.c **** static uint16_t target_pulse_value[STEP_MOTOR_CNT] = {0};
   7:modules/motor/step_motor/step_motor.c **** static GPIO_PinState motor_direction_arr[STEP_MOTOR_CNT] = {DISABLE, DISABLE, DISABLE};
   8:modules/motor/step_motor/step_motor.c **** static uint8_t step_motor_idx = 0; // register index
   9:modules/motor/step_motor/step_motor.c **** 
  10:modules/motor/step_motor/step_motor.c **** /**
  11:modules/motor/step_motor/step_motor.c ****  * @brief step motor register function
  12:modules/motor/step_motor/step_motor.c ****  *
  13:modules/motor/step_motor/step_motor.c ****  */
  14:modules/motor/step_motor/step_motor.c **** StepMotorInstance *StepMotorInit(Step_Motor_Init_Config_s *Step_Init_Config)
  15:modules/motor/step_motor/step_motor.c **** {
  29              		.loc 1 15 1 view -0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 0
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  33              		.loc 1 15 1 is_stmt 0 view .LVU1
  34 0000 70B5     		push	{r4, r5, r6, lr}
  35              	.LCFI0:
  36              		.cfi_def_cfa_offset 16
  37              		.cfi_offset 4, -16
  38              		.cfi_offset 5, -12
  39              		.cfi_offset 6, -8
  40              		.cfi_offset 14, -4
  41 0002 0646     		mov	r6, r0
  16:modules/motor/step_motor/step_motor.c ****     StepMotorInstance *instance = (StepMotorInstance *)malloc(sizeof(StepMotorInstance));
  42              		.loc 1 16 5 is_stmt 1 view .LVU2
ARM GAS  C:\Users\blue\AppData\Local\Temp\ccxiCAXf.s 			page 2


  43              		.loc 1 16 56 is_stmt 0 view .LVU3
  44 0004 1820     		movs	r0, #24
  45              	.LVL1:
  46              		.loc 1 16 56 view .LVU4
  47 0006 FFF7FEFF 		bl	malloc
  48              	.LVL2:
  49 000a 0446     		mov	r4, r0
  50              	.LVL3:
  17:modules/motor/step_motor/step_motor.c ****     memset(instance, 0, sizeof(StepMotorInstance));
  51              		.loc 1 17 5 is_stmt 1 view .LVU5
  52 000c 0025     		movs	r5, #0
  53 000e 0560     		str	r5, [r0]	@ unaligned
  54 0010 4560     		str	r5, [r0, #4]	@ unaligned
  55 0012 8560     		str	r5, [r0, #8]	@ unaligned
  56 0014 C560     		str	r5, [r0, #12]	@ unaligned
  57 0016 0561     		str	r5, [r0, #16]	@ unaligned
  58 0018 4561     		str	r5, [r0, #20]	@ unaligned
  18:modules/motor/step_motor/step_motor.c **** 
  19:modules/motor/step_motor/step_motor.c ****     instance->Step_Motor_type = Step_Init_Config->step_motor_type;
  59              		.loc 1 19 5 view .LVU6
  60              		.loc 1 19 49 is_stmt 0 view .LVU7
  61 001a 3378     		ldrb	r3, [r6]	@ zero_extendqisi2
  62              		.loc 1 19 31 view .LVU8
  63 001c 0370     		strb	r3, [r0]
  20:modules/motor/step_motor/step_motor.c ****     // instance->htim = Step_Init_Config->htim;
  21:modules/motor/step_motor/step_motor.c ****     instance->main_htim = Step_Init_Config->main_htim;
  64              		.loc 1 21 5 is_stmt 1 view .LVU9
  65              		.loc 1 21 43 is_stmt 0 view .LVU10
  66 001e 7368     		ldr	r3, [r6, #4]
  67              		.loc 1 21 25 view .LVU11
  68 0020 4360     		str	r3, [r0, #4]
  22:modules/motor/step_motor/step_motor.c ****     instance->channel = Step_Init_Config->channel;
  69              		.loc 1 22 5 is_stmt 1 view .LVU12
  70              		.loc 1 22 41 is_stmt 0 view .LVU13
  71 0022 F368     		ldr	r3, [r6, #12]
  72              		.loc 1 22 23 view .LVU14
  73 0024 8360     		str	r3, [r0, #8]
  23:modules/motor/step_motor/step_motor.c ****     instance->slave_htim = Step_Init_Config->slave_htim;
  74              		.loc 1 23 5 is_stmt 1 view .LVU15
  75              		.loc 1 23 44 is_stmt 0 view .LVU16
  76 0026 B368     		ldr	r3, [r6, #8]
  77              		.loc 1 23 26 view .LVU17
  78 0028 C360     		str	r3, [r0, #12]
  24:modules/motor/step_motor/step_motor.c ****     instance->slave_htim->Instance->CNT = 0;
  79              		.loc 1 24 5 is_stmt 1 view .LVU18
  80              		.loc 1 24 25 is_stmt 0 view .LVU19
  81 002a 1B68     		ldr	r3, [r3]
  82              		.loc 1 24 41 view .LVU20
  83 002c 5D62     		str	r5, [r3, #36]
  25:modules/motor/step_motor/step_motor.c ****     instance->motor_reverse_flag = Step_Init_Config->motor_reverse_flag;
  84              		.loc 1 25 5 is_stmt 1 view .LVU21
  85              		.loc 1 25 52 is_stmt 0 view .LVU22
  86 002e 7378     		ldrb	r3, [r6, #1]	@ zero_extendqisi2
  87              		.loc 1 25 34 view .LVU23
  88 0030 8370     		strb	r3, [r0, #2]
  26:modules/motor/step_motor/step_motor.c ****     instance->stop_flag = MOTOR_STOP;
  89              		.loc 1 26 5 is_stmt 1 view .LVU24
ARM GAS  C:\Users\blue\AppData\Local\Temp\ccxiCAXf.s 			page 3


  90              		.loc 1 26 25 is_stmt 0 view .LVU25
  91 0032 4570     		strb	r5, [r0, #1]
  27:modules/motor/step_motor/step_motor.c ****     step_motor_instance[step_motor_idx++] = instance;
  92              		.loc 1 27 5 is_stmt 1 view .LVU26
  93              		.loc 1 27 39 is_stmt 0 view .LVU27
  94 0034 084A     		ldr	r2, .L3
  95 0036 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
  96 0038 591C     		adds	r1, r3, #1
  97 003a 1170     		strb	r1, [r2]
  98              		.loc 1 27 43 view .LVU28
  99 003c 074A     		ldr	r2, .L3+4
 100 003e 42F82300 		str	r0, [r2, r3, lsl #2]
  28:modules/motor/step_motor/step_motor.c ****     HAL_TIM_PWM_Stop(instance->main_htim, instance->channel);
 101              		.loc 1 28 5 is_stmt 1 view .LVU29
 102 0042 8168     		ldr	r1, [r0, #8]
 103 0044 4068     		ldr	r0, [r0, #4]
 104              	.LVL4:
 105              		.loc 1 28 5 is_stmt 0 view .LVU30
 106 0046 FFF7FEFF 		bl	HAL_TIM_PWM_Stop
 107              	.LVL5:
  29:modules/motor/step_motor/step_motor.c ****     HAL_TIM_Base_Stop(instance->slave_htim);
 108              		.loc 1 29 5 is_stmt 1 view .LVU31
 109 004a E068     		ldr	r0, [r4, #12]
 110 004c FFF7FEFF 		bl	HAL_TIM_Base_Stop
 111              	.LVL6:
  30:modules/motor/step_motor/step_motor.c ****     instance->motor_finish_flag = motor_finish;
 112              		.loc 1 30 5 view .LVU32
 113              		.loc 1 30 33 is_stmt 0 view .LVU33
 114 0050 A575     		strb	r5, [r4, #22]
  31:modules/motor/step_motor/step_motor.c ****     return instance;
 115              		.loc 1 31 5 is_stmt 1 view .LVU34
  32:modules/motor/step_motor/step_motor.c **** }
 116              		.loc 1 32 1 is_stmt 0 view .LVU35
 117 0052 2046     		mov	r0, r4
 118 0054 70BD     		pop	{r4, r5, r6, pc}
 119              	.LVL7:
 120              	.L4:
 121              		.loc 1 32 1 view .LVU36
 122 0056 00BF     		.align	2
 123              	.L3:
 124 0058 00000000 		.word	.LANCHOR0
 125 005c 00000000 		.word	.LANCHOR1
 126              		.cfi_endproc
 127              	.LFE185:
 129              		.section	.text.setTargetPulse,"ax",%progbits
 130              		.align	1
 131              		.global	setTargetPulse
 132              		.syntax unified
 133              		.thumb
 134              		.thumb_func
 136              	setTargetPulse:
 137              	.LVL8:
 138              	.LFB186:
  33:modules/motor/step_motor/step_motor.c **** 
  34:modules/motor/step_motor/step_motor.c **** void setTargetPulse(StepMotorInstance *instance, uint16_t target_pulse, GPIO_PinState motor_directi
  35:modules/motor/step_motor/step_motor.c **** {
 139              		.loc 1 35 1 is_stmt 1 view -0
ARM GAS  C:\Users\blue\AppData\Local\Temp\ccxiCAXf.s 			page 4


 140              		.cfi_startproc
 141              		@ args = 0, pretend = 0, frame = 0
 142              		@ frame_needed = 0, uses_anonymous_args = 0
 143              		@ link register save eliminated.
 144              		.loc 1 35 1 is_stmt 0 view .LVU38
 145 0000 10B4     		push	{r4}
 146              	.LCFI1:
 147              		.cfi_def_cfa_offset 4
 148              		.cfi_offset 4, -4
  36:modules/motor/step_motor/step_motor.c ****     for (size_t i = 0; i < step_motor_idx; ++i)
 149              		.loc 1 36 5 is_stmt 1 view .LVU39
 150              	.LBB2:
 151              		.loc 1 36 10 view .LVU40
 152              	.LVL9:
 153              		.loc 1 36 17 is_stmt 0 view .LVU41
 154 0002 0023     		movs	r3, #0
 155              		.loc 1 36 5 view .LVU42
 156 0004 00E0     		b	.L6
 157              	.LVL10:
 158              	.L7:
 159              		.loc 1 36 44 is_stmt 1 discriminator 2 view .LVU43
 160 0006 0133     		adds	r3, r3, #1
 161              	.LVL11:
 162              	.L6:
 163              		.loc 1 36 24 discriminator 1 view .LVU44
 164              		.loc 1 36 26 is_stmt 0 discriminator 1 view .LVU45
 165 0008 094C     		ldr	r4, .L11
 166 000a 94F800C0 		ldrb	ip, [r4]	@ zero_extendqisi2
 167              		.loc 1 36 5 discriminator 1 view .LVU46
 168 000e 9C45     		cmp	ip, r3
 169 0010 0AD9     		bls	.L10
  37:modules/motor/step_motor/step_motor.c ****     {
  38:modules/motor/step_motor/step_motor.c ****         if (step_motor_instance[i] == instance)
 170              		.loc 1 38 9 is_stmt 1 view .LVU47
 171              		.loc 1 38 32 is_stmt 0 view .LVU48
 172 0012 084C     		ldr	r4, .L11+4
 173 0014 54F82340 		ldr	r4, [r4, r3, lsl #2]
 174              		.loc 1 38 12 view .LVU49
 175 0018 8442     		cmp	r4, r0
 176 001a F4D1     		bne	.L7
  39:modules/motor/step_motor/step_motor.c ****         {
  40:modules/motor/step_motor/step_motor.c ****             target_pulse_value[i] = target_pulse;
 177              		.loc 1 40 13 is_stmt 1 view .LVU50
 178              		.loc 1 40 35 is_stmt 0 view .LVU51
 179 001c 064C     		ldr	r4, .L11+8
 180 001e 24F81310 		strh	r1, [r4, r3, lsl #1]	@ movhi
  41:modules/motor/step_motor/step_motor.c ****             motor_direction_arr[i] = motor_direction;
 181              		.loc 1 41 13 is_stmt 1 view .LVU52
 182              		.loc 1 41 36 is_stmt 0 view .LVU53
 183 0022 064C     		ldr	r4, .L11+12
 184 0024 E254     		strb	r2, [r4, r3]
 185 0026 EEE7     		b	.L7
 186              	.L10:
 187              		.loc 1 41 36 view .LVU54
 188              	.LBE2:
  42:modules/motor/step_motor/step_motor.c ****         }
  43:modules/motor/step_motor/step_motor.c ****     }
ARM GAS  C:\Users\blue\AppData\Local\Temp\ccxiCAXf.s 			page 5


  44:modules/motor/step_motor/step_motor.c **** }
 189              		.loc 1 44 1 view .LVU55
 190 0028 5DF8044B 		ldr	r4, [sp], #4
 191              	.LCFI2:
 192              		.cfi_restore 4
 193              		.cfi_def_cfa_offset 0
 194 002c 7047     		bx	lr
 195              	.L12:
 196 002e 00BF     		.align	2
 197              	.L11:
 198 0030 00000000 		.word	.LANCHOR0
 199 0034 00000000 		.word	.LANCHOR1
 200 0038 00000000 		.word	.LANCHOR2
 201 003c 00000000 		.word	.LANCHOR3
 202              		.cfi_endproc
 203              	.LFE186:
 205              		.section	.text.StepMotorControl,"ax",%progbits
 206              		.align	1
 207              		.global	StepMotorControl
 208              		.syntax unified
 209              		.thumb
 210              		.thumb_func
 212              	StepMotorControl:
 213              	.LFB187:
  45:modules/motor/step_motor/step_motor.c **** /**
  46:modules/motor/step_motor/step_motor.c ****  * @brief step motor control function
  47:modules/motor/step_motor/step_motor.c ****  *        if motor finish flag is not finish, the next step should not be implemented
  48:modules/motor/step_motor/step_motor.c ****  *
  49:modules/motor/step_motor/step_motor.c ****  */
  50:modules/motor/step_motor/step_motor.c **** void StepMotorControl()
  51:modules/motor/step_motor/step_motor.c **** {
 214              		.loc 1 51 1 is_stmt 1 view -0
 215              		.cfi_startproc
 216              		@ args = 0, pretend = 0, frame = 0
 217              		@ frame_needed = 0, uses_anonymous_args = 0
 218 0000 38B5     		push	{r3, r4, r5, lr}
 219              	.LCFI3:
 220              		.cfi_def_cfa_offset 16
 221              		.cfi_offset 3, -16
 222              		.cfi_offset 4, -12
 223              		.cfi_offset 5, -8
 224              		.cfi_offset 14, -4
  52:modules/motor/step_motor/step_motor.c ****     StepMotorInstance *Step_Motor;
 225              		.loc 1 52 5 view .LVU57
  53:modules/motor/step_motor/step_motor.c **** 
  54:modules/motor/step_motor/step_motor.c ****     for (size_t i = 0; i < step_motor_idx; ++i)
 226              		.loc 1 54 5 view .LVU58
 227              	.LBB3:
 228              		.loc 1 54 10 view .LVU59
 229              	.LVL12:
 230              		.loc 1 54 17 is_stmt 0 view .LVU60
 231 0002 0025     		movs	r5, #0
 232              		.loc 1 54 5 view .LVU61
 233 0004 19E0     		b	.L14
 234              	.LVL13:
 235              	.L16:
  55:modules/motor/step_motor/step_motor.c ****     {
ARM GAS  C:\Users\blue\AppData\Local\Temp\ccxiCAXf.s 			page 6


  56:modules/motor/step_motor/step_motor.c ****         if (step_motor_instance[i])
  57:modules/motor/step_motor/step_motor.c ****         {
  58:modules/motor/step_motor/step_motor.c ****             Step_Motor = step_motor_instance[i];
  59:modules/motor/step_motor/step_motor.c **** 
  60:modules/motor/step_motor/step_motor.c ****             switch (Step_Motor->Step_Motor_type)
  61:modules/motor/step_motor/step_motor.c ****             {
  62:modules/motor/step_motor/step_motor.c ****             case Emm28_V5:
  63:modules/motor/step_motor/step_motor.c ****                 if (Step_Motor->motor_reverse_flag == MOTOR_DIRECTION_REVERSE)
 236              		.loc 1 63 17 is_stmt 1 view .LVU62
 237              		.loc 1 63 31 is_stmt 0 view .LVU63
 238 0006 A378     		ldrb	r3, [r4, #2]	@ zero_extendqisi2
 239              		.loc 1 63 20 view .LVU64
 240 0008 012B     		cmp	r3, #1
 241 000a 3ED0     		beq	.L26
  64:modules/motor/step_motor/step_motor.c ****                 {
  65:modules/motor/step_motor/step_motor.c ****                     HAL_GPIO_WritePin(Step_Motor->direction_port, Step_Motor->direction_pin, !motor
  66:modules/motor/step_motor/step_motor.c ****                 }
  67:modules/motor/step_motor/step_motor.c ****                 else
  68:modules/motor/step_motor/step_motor.c ****                 {
  69:modules/motor/step_motor/step_motor.c ****                     HAL_GPIO_WritePin(Step_Motor->direction_port, Step_Motor->direction_pin, motor_
 242              		.loc 1 69 21 is_stmt 1 view .LVU65
 243 000c 364B     		ldr	r3, .L29
 244 000e 5A5D     		ldrb	r2, [r3, r5]	@ zero_extendqisi2
 245 0010 A18A     		ldrh	r1, [r4, #20]
 246 0012 2069     		ldr	r0, [r4, #16]
 247 0014 FFF7FEFF 		bl	HAL_GPIO_WritePin
 248              	.LVL14:
 249              	.L19:
  70:modules/motor/step_motor/step_motor.c ****                 }
  71:modules/motor/step_motor/step_motor.c ****                 if (Step_Motor->slave_htim->Instance->CNT < target_pulse_value[i])
 250              		.loc 1 71 17 view .LVU66
 251              		.loc 1 71 31 is_stmt 0 view .LVU67
 252 0018 E068     		ldr	r0, [r4, #12]
 253              		.loc 1 71 43 view .LVU68
 254 001a 0368     		ldr	r3, [r0]
 255              		.loc 1 71 53 view .LVU69
 256 001c 5A6A     		ldr	r2, [r3, #36]
 257              		.loc 1 71 79 view .LVU70
 258 001e 334B     		ldr	r3, .L29+4
 259 0020 33F81530 		ldrh	r3, [r3, r5, lsl #1]
 260              		.loc 1 71 20 view .LVU71
 261 0024 9A42     		cmp	r2, r3
 262 0026 3AD2     		bcs	.L20
  72:modules/motor/step_motor/step_motor.c ****                 {
  73:modules/motor/step_motor/step_motor.c ****                     HAL_TIM_Base_Start(Step_Motor->slave_htim);
 263              		.loc 1 73 21 is_stmt 1 view .LVU72
 264 0028 FFF7FEFF 		bl	HAL_TIM_Base_Start
 265              	.LVL15:
  74:modules/motor/step_motor/step_motor.c ****                     HAL_TIM_PWM_Start(Step_Motor->main_htim, Step_Motor->channel);
 266              		.loc 1 74 21 view .LVU73
 267 002c A168     		ldr	r1, [r4, #8]
 268 002e 6068     		ldr	r0, [r4, #4]
 269 0030 FFF7FEFF 		bl	HAL_TIM_PWM_Start
 270              	.LVL16:
  75:modules/motor/step_motor/step_motor.c ****                     Step_Motor->motor_finish_flag = motor_running;
 271              		.loc 1 75 21 view .LVU74
 272              		.loc 1 75 51 is_stmt 0 view .LVU75
ARM GAS  C:\Users\blue\AppData\Local\Temp\ccxiCAXf.s 			page 7


 273 0034 0123     		movs	r3, #1
 274 0036 A375     		strb	r3, [r4, #22]
 275              	.LVL17:
 276              	.L15:
  54:modules/motor/step_motor/step_motor.c ****     {
 277              		.loc 1 54 44 is_stmt 1 discriminator 2 view .LVU76
 278 0038 0135     		adds	r5, r5, #1
 279              	.LVL18:
 280              	.L14:
  54:modules/motor/step_motor/step_motor.c ****     {
 281              		.loc 1 54 24 discriminator 1 view .LVU77
  54:modules/motor/step_motor/step_motor.c ****     {
 282              		.loc 1 54 26 is_stmt 0 discriminator 1 view .LVU78
 283 003a 2D4B     		ldr	r3, .L29+8
 284 003c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
  54:modules/motor/step_motor/step_motor.c ****     {
 285              		.loc 1 54 5 discriminator 1 view .LVU79
 286 003e AB42     		cmp	r3, r5
 287 0040 51D9     		bls	.L27
  56:modules/motor/step_motor/step_motor.c ****         {
 288              		.loc 1 56 9 is_stmt 1 view .LVU80
  56:modules/motor/step_motor/step_motor.c ****         {
 289              		.loc 1 56 32 is_stmt 0 view .LVU81
 290 0042 2C4B     		ldr	r3, .L29+12
 291 0044 53F82540 		ldr	r4, [r3, r5, lsl #2]
  56:modules/motor/step_motor/step_motor.c ****         {
 292              		.loc 1 56 12 view .LVU82
 293 0048 002C     		cmp	r4, #0
 294 004a F5D0     		beq	.L15
  58:modules/motor/step_motor/step_motor.c **** 
 295              		.loc 1 58 13 is_stmt 1 view .LVU83
 296              	.LVL19:
  60:modules/motor/step_motor/step_motor.c ****             {
 297              		.loc 1 60 13 view .LVU84
  60:modules/motor/step_motor/step_motor.c ****             {
 298              		.loc 1 60 31 is_stmt 0 view .LVU85
 299 004c 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
  60:modules/motor/step_motor/step_motor.c ****             {
 300              		.loc 1 60 13 view .LVU86
 301 004e 002B     		cmp	r3, #0
 302 0050 D9D0     		beq	.L16
 303 0052 012B     		cmp	r3, #1
 304 0054 F0D1     		bne	.L15
  76:modules/motor/step_motor/step_motor.c ****                 }
  77:modules/motor/step_motor/step_motor.c ****                 else
  78:modules/motor/step_motor/step_motor.c ****                 {
  79:modules/motor/step_motor/step_motor.c ****                     HAL_TIM_PWM_Stop(Step_Motor->main_htim, Step_Motor->channel);
  80:modules/motor/step_motor/step_motor.c ****                     HAL_TIM_Base_Stop(Step_Motor->slave_htim);
  81:modules/motor/step_motor/step_motor.c ****                     Step_Motor->slave_htim->Instance->CNT = 0;
  82:modules/motor/step_motor/step_motor.c ****                     Step_Motor->motor_finish_flag = motor_finish;
  83:modules/motor/step_motor/step_motor.c ****                 }
  84:modules/motor/step_motor/step_motor.c ****                 break;
  85:modules/motor/step_motor/step_motor.c ****             case Emm42_V5:
  86:modules/motor/step_motor/step_motor.c ****                 if (Step_Motor->motor_reverse_flag == MOTOR_DIRECTION_REVERSE)
 305              		.loc 1 86 17 is_stmt 1 view .LVU87
 306              		.loc 1 86 31 is_stmt 0 view .LVU88
 307 0056 A378     		ldrb	r3, [r4, #2]	@ zero_extendqisi2
ARM GAS  C:\Users\blue\AppData\Local\Temp\ccxiCAXf.s 			page 8


 308              		.loc 1 86 20 view .LVU89
 309 0058 012B     		cmp	r3, #1
 310 005a 2DD0     		beq	.L28
  87:modules/motor/step_motor/step_motor.c ****                 {
  88:modules/motor/step_motor/step_motor.c ****                     HAL_GPIO_WritePin(Step_Motor->direction_port, Step_Motor->direction_pin, !motor
  89:modules/motor/step_motor/step_motor.c ****                 }
  90:modules/motor/step_motor/step_motor.c ****                 else
  91:modules/motor/step_motor/step_motor.c ****                 {
  92:modules/motor/step_motor/step_motor.c ****                     HAL_GPIO_WritePin(Step_Motor->direction_port, Step_Motor->direction_pin, motor_
 311              		.loc 1 92 21 is_stmt 1 view .LVU90
 312 005c 224B     		ldr	r3, .L29
 313 005e 5A5D     		ldrb	r2, [r3, r5]	@ zero_extendqisi2
 314 0060 A18A     		ldrh	r1, [r4, #20]
 315 0062 2069     		ldr	r0, [r4, #16]
 316 0064 FFF7FEFF 		bl	HAL_GPIO_WritePin
 317              	.LVL20:
 318              	.L22:
  93:modules/motor/step_motor/step_motor.c ****                 }
  94:modules/motor/step_motor/step_motor.c ****                 if (Step_Motor->slave_htim->Instance->CNT < target_pulse_value[i])
 319              		.loc 1 94 17 view .LVU91
 320              		.loc 1 94 31 is_stmt 0 view .LVU92
 321 0068 E068     		ldr	r0, [r4, #12]
 322              		.loc 1 94 43 view .LVU93
 323 006a 0368     		ldr	r3, [r0]
 324              		.loc 1 94 53 view .LVU94
 325 006c 5A6A     		ldr	r2, [r3, #36]
 326              		.loc 1 94 79 view .LVU95
 327 006e 1F4B     		ldr	r3, .L29+4
 328 0070 33F81530 		ldrh	r3, [r3, r5, lsl #1]
 329              		.loc 1 94 20 view .LVU96
 330 0074 9A42     		cmp	r2, r3
 331 0076 29D2     		bcs	.L23
  95:modules/motor/step_motor/step_motor.c ****                 {
  96:modules/motor/step_motor/step_motor.c ****                     HAL_TIM_Base_Start(Step_Motor->slave_htim);
 332              		.loc 1 96 21 is_stmt 1 view .LVU97
 333 0078 FFF7FEFF 		bl	HAL_TIM_Base_Start
 334              	.LVL21:
  97:modules/motor/step_motor/step_motor.c ****                     HAL_TIM_PWM_Start(Step_Motor->main_htim, Step_Motor->channel);
 335              		.loc 1 97 21 view .LVU98
 336 007c A168     		ldr	r1, [r4, #8]
 337 007e 6068     		ldr	r0, [r4, #4]
 338 0080 FFF7FEFF 		bl	HAL_TIM_PWM_Start
 339              	.LVL22:
  98:modules/motor/step_motor/step_motor.c ****                     Step_Motor->motor_finish_flag = motor_running;
 340              		.loc 1 98 21 view .LVU99
 341              		.loc 1 98 51 is_stmt 0 view .LVU100
 342 0084 0123     		movs	r3, #1
 343 0086 A375     		strb	r3, [r4, #22]
 344 0088 D6E7     		b	.L15
 345              	.L26:
  65:modules/motor/step_motor/step_motor.c ****                 }
 346              		.loc 1 65 21 is_stmt 1 view .LVU101
  65:modules/motor/step_motor/step_motor.c ****                 }
 347              		.loc 1 65 114 is_stmt 0 view .LVU102
 348 008a 174B     		ldr	r3, .L29
 349 008c 5A5D     		ldrb	r2, [r3, r5]	@ zero_extendqisi2
  65:modules/motor/step_motor/step_motor.c ****                 }
ARM GAS  C:\Users\blue\AppData\Local\Temp\ccxiCAXf.s 			page 9


 350              		.loc 1 65 21 view .LVU103
 351 008e B2FA82F2 		clz	r2, r2
 352 0092 5209     		lsrs	r2, r2, #5
 353 0094 A18A     		ldrh	r1, [r4, #20]
 354 0096 2069     		ldr	r0, [r4, #16]
 355 0098 FFF7FEFF 		bl	HAL_GPIO_WritePin
 356              	.LVL23:
 357 009c BCE7     		b	.L19
 358              	.L20:
  79:modules/motor/step_motor/step_motor.c ****                     HAL_TIM_Base_Stop(Step_Motor->slave_htim);
 359              		.loc 1 79 21 is_stmt 1 view .LVU104
 360 009e A168     		ldr	r1, [r4, #8]
 361 00a0 6068     		ldr	r0, [r4, #4]
 362 00a2 FFF7FEFF 		bl	HAL_TIM_PWM_Stop
 363              	.LVL24:
  80:modules/motor/step_motor/step_motor.c ****                     Step_Motor->slave_htim->Instance->CNT = 0;
 364              		.loc 1 80 21 view .LVU105
 365 00a6 E068     		ldr	r0, [r4, #12]
 366 00a8 FFF7FEFF 		bl	HAL_TIM_Base_Stop
 367              	.LVL25:
  81:modules/motor/step_motor/step_motor.c ****                     Step_Motor->motor_finish_flag = motor_finish;
 368              		.loc 1 81 21 view .LVU106
  81:modules/motor/step_motor/step_motor.c ****                     Step_Motor->motor_finish_flag = motor_finish;
 369              		.loc 1 81 31 is_stmt 0 view .LVU107
 370 00ac E368     		ldr	r3, [r4, #12]
  81:modules/motor/step_motor/step_motor.c ****                     Step_Motor->motor_finish_flag = motor_finish;
 371              		.loc 1 81 43 view .LVU108
 372 00ae 1A68     		ldr	r2, [r3]
  81:modules/motor/step_motor/step_motor.c ****                     Step_Motor->motor_finish_flag = motor_finish;
 373              		.loc 1 81 59 view .LVU109
 374 00b0 0023     		movs	r3, #0
 375 00b2 5362     		str	r3, [r2, #36]
  82:modules/motor/step_motor/step_motor.c ****                 }
 376              		.loc 1 82 21 is_stmt 1 view .LVU110
  82:modules/motor/step_motor/step_motor.c ****                 }
 377              		.loc 1 82 51 is_stmt 0 view .LVU111
 378 00b4 A375     		strb	r3, [r4, #22]
 379 00b6 BFE7     		b	.L15
 380              	.L28:
  88:modules/motor/step_motor/step_motor.c ****                 }
 381              		.loc 1 88 21 is_stmt 1 view .LVU112
  88:modules/motor/step_motor/step_motor.c ****                 }
 382              		.loc 1 88 114 is_stmt 0 view .LVU113
 383 00b8 0B4B     		ldr	r3, .L29
 384 00ba 5A5D     		ldrb	r2, [r3, r5]	@ zero_extendqisi2
  88:modules/motor/step_motor/step_motor.c ****                 }
 385              		.loc 1 88 21 view .LVU114
 386 00bc B2FA82F2 		clz	r2, r2
 387 00c0 5209     		lsrs	r2, r2, #5
 388 00c2 A18A     		ldrh	r1, [r4, #20]
 389 00c4 2069     		ldr	r0, [r4, #16]
 390 00c6 FFF7FEFF 		bl	HAL_GPIO_WritePin
 391              	.LVL26:
 392 00ca CDE7     		b	.L22
 393              	.L23:
  99:modules/motor/step_motor/step_motor.c ****                 }
 100:modules/motor/step_motor/step_motor.c ****                 else
ARM GAS  C:\Users\blue\AppData\Local\Temp\ccxiCAXf.s 			page 10


 101:modules/motor/step_motor/step_motor.c ****                 {
 102:modules/motor/step_motor/step_motor.c ****                     HAL_TIM_PWM_Stop(Step_Motor->main_htim, Step_Motor->channel);
 394              		.loc 1 102 21 is_stmt 1 view .LVU115
 395 00cc A168     		ldr	r1, [r4, #8]
 396 00ce 6068     		ldr	r0, [r4, #4]
 397 00d0 FFF7FEFF 		bl	HAL_TIM_PWM_Stop
 398              	.LVL27:
 103:modules/motor/step_motor/step_motor.c ****                     HAL_TIM_Base_Stop(Step_Motor->slave_htim);
 399              		.loc 1 103 21 view .LVU116
 400 00d4 E068     		ldr	r0, [r4, #12]
 401 00d6 FFF7FEFF 		bl	HAL_TIM_Base_Stop
 402              	.LVL28:
 104:modules/motor/step_motor/step_motor.c ****                     Step_Motor->slave_htim->Instance->CNT = 0;
 403              		.loc 1 104 21 view .LVU117
 404              		.loc 1 104 31 is_stmt 0 view .LVU118
 405 00da E368     		ldr	r3, [r4, #12]
 406              		.loc 1 104 43 view .LVU119
 407 00dc 1A68     		ldr	r2, [r3]
 408              		.loc 1 104 59 view .LVU120
 409 00de 0023     		movs	r3, #0
 410 00e0 5362     		str	r3, [r2, #36]
 105:modules/motor/step_motor/step_motor.c ****                     Step_Motor->motor_finish_flag = motor_finish;
 411              		.loc 1 105 21 is_stmt 1 view .LVU121
 412              		.loc 1 105 51 is_stmt 0 view .LVU122
 413 00e2 A375     		strb	r3, [r4, #22]
 414 00e4 A8E7     		b	.L15
 415              	.LVL29:
 416              	.L27:
 417              		.loc 1 105 51 view .LVU123
 418              	.LBE3:
 106:modules/motor/step_motor/step_motor.c ****                 }
 107:modules/motor/step_motor/step_motor.c ****                 break;
 108:modules/motor/step_motor/step_motor.c ****             }
 109:modules/motor/step_motor/step_motor.c ****         }
 110:modules/motor/step_motor/step_motor.c ****     }
 111:modules/motor/step_motor/step_motor.c **** }...
 419              		.loc 1 111 1 view .LVU124
 420 00e6 38BD     		pop	{r3, r4, r5, pc}
 421              	.LVL30:
 422              	.L30:
 423              		.loc 1 111 1 view .LVU125
 424              		.align	2
 425              	.L29:
 426 00e8 00000000 		.word	.LANCHOR3
 427 00ec 00000000 		.word	.LANCHOR2
 428 00f0 00000000 		.word	.LANCHOR0
 429 00f4 00000000 		.word	.LANCHOR1
 430              		.cfi_endproc
 431              	.LFE187:
 433              		.section	.bss.motor_direction_arr,"aw",%nobits
 434              		.align	2
 435              		.set	.LANCHOR3,. + 0
 438              	motor_direction_arr:
 439 0000 000000   		.space	3
 440              		.section	.bss.step_motor_idx,"aw",%nobits
 441              		.set	.LANCHOR0,. + 0
 444              	step_motor_idx:
ARM GAS  C:\Users\blue\AppData\Local\Temp\ccxiCAXf.s 			page 11


 445 0000 00       		.space	1
 446              		.section	.bss.step_motor_instance,"aw",%nobits
 447              		.align	2
 448              		.set	.LANCHOR1,. + 0
 451              	step_motor_instance:
 452 0000 00000000 		.space	12
 452      00000000 
 452      00000000 
 453              		.section	.bss.target_pulse_value,"aw",%nobits
 454              		.align	2
 455              		.set	.LANCHOR2,. + 0
 458              	target_pulse_value:
 459 0000 00000000 		.space	6
 459      0000
 460              		.text
 461              	.Letext0:
 462              		.file 2 "d:\\rm\\arm-gnu-toolchian\\arm-none-eabi\\include\\machine\\_default_types.h"
 463              		.file 3 "d:\\rm\\arm-gnu-toolchian\\arm-none-eabi\\include\\sys\\_stdint.h"
 464              		.file 4 "Drivers/CMSIS/Device/ST/STM32H7xx/Include/stm32h743xx.h"
 465              		.file 5 "d:\\rm\\arm-gnu-toolchian\\lib\\gcc\\arm-none-eabi\\10.3.1\\include\\stddef.h"
 466              		.file 6 "Drivers/CMSIS/Device/ST/STM32H7xx/Include/stm32h7xx.h"
 467              		.file 7 "Drivers/STM32H7xx_HAL_Driver/Inc/stm32h7xx_hal_def.h"
 468              		.file 8 "Drivers/STM32H7xx_HAL_Driver/Inc/stm32h7xx_hal_gpio.h"
 469              		.file 9 "Drivers/STM32H7xx_HAL_Driver/Inc/stm32h7xx_hal_dma.h"
 470              		.file 10 "Drivers/STM32H7xx_HAL_Driver/Inc/stm32h7xx_hal_tim.h"
 471              		.file 11 "modules/motor/motor_def.h"
 472              		.file 12 "modules/motor/step_motor/step_motor.h"
 473              		.file 13 "d:\\rm\\arm-gnu-toolchian\\arm-none-eabi\\include\\stdlib.h"
ARM GAS  C:\Users\blue\AppData\Local\Temp\ccxiCAXf.s 			page 12


DEFINED SYMBOLS
                            *ABS*:00000000 step_motor.c
C:\Users\blue\AppData\Local\Temp\ccxiCAXf.s:19     .text.StepMotorInit:00000000 $t
C:\Users\blue\AppData\Local\Temp\ccxiCAXf.s:25     .text.StepMotorInit:00000000 StepMotorInit
C:\Users\blue\AppData\Local\Temp\ccxiCAXf.s:124    .text.StepMotorInit:00000058 $d
C:\Users\blue\AppData\Local\Temp\ccxiCAXf.s:130    .text.setTargetPulse:00000000 $t
C:\Users\blue\AppData\Local\Temp\ccxiCAXf.s:136    .text.setTargetPulse:00000000 setTargetPulse
C:\Users\blue\AppData\Local\Temp\ccxiCAXf.s:198    .text.setTargetPulse:00000030 $d
C:\Users\blue\AppData\Local\Temp\ccxiCAXf.s:206    .text.StepMotorControl:00000000 $t
C:\Users\blue\AppData\Local\Temp\ccxiCAXf.s:212    .text.StepMotorControl:00000000 StepMotorControl
C:\Users\blue\AppData\Local\Temp\ccxiCAXf.s:426    .text.StepMotorControl:000000e8 $d
C:\Users\blue\AppData\Local\Temp\ccxiCAXf.s:434    .bss.motor_direction_arr:00000000 $d
C:\Users\blue\AppData\Local\Temp\ccxiCAXf.s:438    .bss.motor_direction_arr:00000000 motor_direction_arr
C:\Users\blue\AppData\Local\Temp\ccxiCAXf.s:444    .bss.step_motor_idx:00000000 step_motor_idx
C:\Users\blue\AppData\Local\Temp\ccxiCAXf.s:445    .bss.step_motor_idx:00000000 $d
C:\Users\blue\AppData\Local\Temp\ccxiCAXf.s:447    .bss.step_motor_instance:00000000 $d
C:\Users\blue\AppData\Local\Temp\ccxiCAXf.s:451    .bss.step_motor_instance:00000000 step_motor_instance
C:\Users\blue\AppData\Local\Temp\ccxiCAXf.s:454    .bss.target_pulse_value:00000000 $d
C:\Users\blue\AppData\Local\Temp\ccxiCAXf.s:458    .bss.target_pulse_value:00000000 target_pulse_value

UNDEFINED SYMBOLS
malloc
HAL_TIM_PWM_Stop
HAL_TIM_Base_Stop
HAL_GPIO_WritePin
HAL_TIM_Base_Start
HAL_TIM_PWM_Start
