ARM GAS  C:\Users\blue\AppData\Local\Temp\cc4UiIWh.s 			page 1


   1              		.cpu cortex-m7
   2              		.arch armv7e-m
   3              		.fpu fpv5-d16
   4              		.eabi_attribute 28, 1
   5              		.eabi_attribute 20, 1
   6              		.eabi_attribute 21, 1
   7              		.eabi_attribute 23, 3
   8              		.eabi_attribute 24, 1
   9              		.eabi_attribute 25, 1
  10              		.eabi_attribute 26, 1
  11              		.eabi_attribute 30, 1
  12              		.eabi_attribute 34, 1
  13              		.eabi_attribute 18, 4
  14              		.file	"bluetooth.c"
  15              		.text
  16              	.Ltext0:
  17              		.cfi_sections	.debug_frame
  18              		.section	.text.bluetooth_buff_to_data,"ax",%progbits
  19              		.align	1
  20              		.global	bluetooth_buff_to_data
  21              		.syntax unified
  22              		.thumb
  23              		.thumb_func
  25              	bluetooth_buff_to_data:
  26              	.LFB144:
  27              		.file 1 "modules/bluetooth/bluetooth.c"
   1:modules/bluetooth/bluetooth.c **** #include "bluetooth.h"
   2:modules/bluetooth/bluetooth.c **** #include "bsp_usart.h"
   3:modules/bluetooth/bluetooth.c **** #include <string.h>
   4:modules/bluetooth/bluetooth.c **** #include "daemon.h"
   5:modules/bluetooth/bluetooth.c **** 
   6:modules/bluetooth/bluetooth.c **** #define bluetooth_FRAME_SIZE 70
   7:modules/bluetooth/bluetooth.c **** #define bluetooth_FRAME_HEAD 0x7EAA
   8:modules/bluetooth/bluetooth.c **** #define bluetooth_FRAME_TAIL 0x7F55
   9:modules/bluetooth/bluetooth.c **** static BLUETOOTH_data_t *bluetooth_data;
  10:modules/bluetooth/bluetooth.c **** static USARTInstance *bluetooth_instance;
  11:modules/bluetooth/bluetooth.c **** void bluetooth_buff_to_data(void)
  12:modules/bluetooth/bluetooth.c **** {
  28              		.loc 1 12 1 view -0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 0
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  13:modules/bluetooth/bluetooth.c ****     for (int i = 0; i < bluetooth_FRAME_SIZE - 22; ++i)
  32              		.loc 1 13 5 view .LVU1
  33              	.LBB2:
  34              		.loc 1 13 10 view .LVU2
  35              	.LVL0:
  36              		.loc 1 13 14 is_stmt 0 view .LVU3
  37 0000 0023     		movs	r3, #0
  38              	.LVL1:
  39              		.loc 1 13 21 is_stmt 1 view .LVU4
  40              		.loc 1 13 5 is_stmt 0 view .LVU5
  41 0002 2F2B     		cmp	r3, #47
  42 0004 2CDC     		bgt	.L8
  43              	.LBE2:
  12:modules/bluetooth/bluetooth.c ****     for (int i = 0; i < bluetooth_FRAME_SIZE - 22; ++i)
  44              		.loc 1 12 1 view .LVU6
ARM GAS  C:\Users\blue\AppData\Local\Temp\cc4UiIWh.s 			page 2


  45 0006 10B5     		push	{r4, lr}
  46              	.LCFI0:
  47              		.cfi_def_cfa_offset 8
  48              		.cfi_offset 4, -8
  49              		.cfi_offset 14, -4
  50 0008 02E0     		b	.L4
  51              	.L3:
  52              	.LBB3:
  53              		.loc 1 13 52 is_stmt 1 discriminator 2 view .LVU7
  54 000a 0133     		adds	r3, r3, #1
  55              	.LVL2:
  56              		.loc 1 13 21 discriminator 2 view .LVU8
  57              		.loc 1 13 5 is_stmt 0 discriminator 2 view .LVU9
  58 000c 2F2B     		cmp	r3, #47
  59 000e 26DC     		bgt	.L9
  60              	.L4:
  14:modules/bluetooth/bluetooth.c ****     {
  15:modules/bluetooth/bluetooth.c ****         if ((bluetooth_instance->recv_buff[i] == (uint8_t)(bluetooth_FRAME_HEAD >> 8) && bluetooth_
  61              		.loc 1 15 9 is_stmt 1 view .LVU10
  62              		.loc 1 15 32 is_stmt 0 view .LVU11
  63 0010 144A     		ldr	r2, .L10
  64 0012 1268     		ldr	r2, [r2]
  65 0014 1268     		ldr	r2, [r2]
  66              		.loc 1 15 43 view .LVU12
  67 0016 1846     		mov	r0, r3
  68 0018 D15C     		ldrb	r1, [r2, r3]	@ zero_extendqisi2
  69              		.loc 1 15 12 view .LVU13
  70 001a 7E29     		cmp	r1, #126
  71 001c F5D1     		bne	.L3
  72              	.LVL3:
  73              		.loc 1 15 119 discriminator 1 view .LVU14
  74 001e D118     		adds	r1, r2, r3
  75 0020 4978     		ldrb	r1, [r1, #1]	@ zero_extendqisi2
  76              		.loc 1 15 87 discriminator 1 view .LVU15
  77 0022 AA29     		cmp	r1, #170
  78 0024 F1D1     		bne	.L3
  79              		.loc 1 15 203 discriminator 2 view .LVU16
  80 0026 D118     		adds	r1, r2, r3
  81 0028 097D     		ldrb	r1, [r1, #20]	@ zero_extendqisi2
  82              		.loc 1 15 170 discriminator 2 view .LVU17
  83 002a 7F29     		cmp	r1, #127
  84 002c EDD1     		bne	.L3
  85              		.loc 1 15 284 discriminator 3 view .LVU18
  86 002e D118     		adds	r1, r2, r3
  87 0030 497D     		ldrb	r1, [r1, #21]	@ zero_extendqisi2
  88              		.loc 1 15 252 discriminator 3 view .LVU19
  89 0032 5529     		cmp	r1, #85
  90 0034 E9D1     		bne	.L3
  16:modules/bluetooth/bluetooth.c ****         {
  17:modules/bluetooth/bluetooth.c ****             memcpy(bluetooth_data->drought_buff, &bluetooth_instance->recv_buff[i + 2], 18);
  91              		.loc 1 17 13 is_stmt 1 view .LVU20
  92              		.loc 1 17 34 is_stmt 0 view .LVU21
  93 0036 0021     		movs	r1, #0
  94              		.loc 1 17 80 view .LVU22
  95 0038 0230     		adds	r0, r0, #2
  96              	.LVL4:
  97              		.loc 1 17 50 view .LVU23
ARM GAS  C:\Users\blue\AppData\Local\Temp\cc4UiIWh.s 			page 3


  98 003a 02EB000C 		add	ip, r2, r0
  99              		.loc 1 17 13 view .LVU24
 100 003e 1458     		ldr	r4, [r2, r0]	@ unaligned
 101 0040 DCF804E0 		ldr	lr, [ip, #4]	@ unaligned
 102 0044 DCF80800 		ldr	r0, [ip, #8]	@ unaligned
 103 0048 DCF80C20 		ldr	r2, [ip, #12]	@ unaligned
 104 004c 0C60     		str	r4, [r1]	@ unaligned
 105 004e C1F804E0 		str	lr, [r1, #4]	@ unaligned
 106 0052 8860     		str	r0, [r1, #8]	@ unaligned
 107 0054 CA60     		str	r2, [r1, #12]	@ unaligned
 108 0056 BCF81020 		ldrh	r2, [ip, #16]	@ unaligned
 109 005a 0A82     		strh	r2, [r1, #16]	@ unaligned
 110 005c D5E7     		b	.L3
 111              	.L9:
 112              		.loc 1 17 13 view .LVU25
 113              	.LBE3:
  18:modules/bluetooth/bluetooth.c ****             // for (int i = 0; i < 18; ++i)
  19:modules/bluetooth/bluetooth.c ****             // {
  20:modules/bluetooth/bluetooth.c ****             //     bluetooth_data->drought_buff[i] = bluetooth_instance->recv_buff[i + 2];
  21:modules/bluetooth/bluetooth.c ****             // }
  22:modules/bluetooth/bluetooth.c ****             // return;
  23:modules/bluetooth/bluetooth.c ****         }
  24:modules/bluetooth/bluetooth.c ****     }
  25:modules/bluetooth/bluetooth.c ****     // if ((bluetooth_instance->recv_buff[0] == (uint8_t)(bluetooth_FRAME_HEAD >> 8) && bluetooth_i
  26:modules/bluetooth/bluetooth.c ****     //     (bluetooth_instance->recv_buff[bluetooth_FRAME_SIZE - 2] == (uint8_t)(bluetooth_FRAME_TA
  27:modules/bluetooth/bluetooth.c ****     // {
  28:modules/bluetooth/bluetooth.c ****     //     memcpy(bluetooth_data->drought_buff, &bluetooth_instance->recv_buff[2], 18);
  29:modules/bluetooth/bluetooth.c ****     //     // for (int i = 0; i < 18; ++i)
  30:modules/bluetooth/bluetooth.c ****     //     // {
  31:modules/bluetooth/bluetooth.c ****     //     //     bluetooth_data->drought_buff[i] = bluetooth_instance->recv_buff[i + 2];
  32:modules/bluetooth/bluetooth.c ****     //     // }
  33:modules/bluetooth/bluetooth.c ****     //     return;
  34:modules/bluetooth/bluetooth.c ****     // }
  35:modules/bluetooth/bluetooth.c **** }
 114              		.loc 1 35 1 view .LVU26
 115 005e 10BD     		pop	{r4, pc}
 116              	.L8:
 117              	.LCFI1:
 118              		.cfi_def_cfa_offset 0
 119              		.cfi_restore 4
 120              		.cfi_restore 14
 121              		.loc 1 35 1 view .LVU27
 122 0060 7047     		bx	lr
 123              	.L11:
 124 0062 00BF     		.align	2
 125              	.L10:
 126 0064 00000000 		.word	.LANCHOR0
 127              		.cfi_endproc
 128              	.LFE144:
 130              		.section	.text.BTRxCallback,"ax",%progbits
 131              		.align	1
 132              		.syntax unified
 133              		.thumb
 134              		.thumb_func
 136              	BTRxCallback:
 137              	.LVL5:
 138              	.LFB145:
ARM GAS  C:\Users\blue\AppData\Local\Temp\cc4UiIWh.s 			page 4


  36:modules/bluetooth/bluetooth.c **** /**
  37:modules/bluetooth/bluetooth.c ****  * @brief ld_buff_to_data,用于注册到bsp_usart的回调函数中
  38:modules/bluetooth/bluetooth.c ****  *
  39:modules/bluetooth/bluetooth.c ****  * @note huart2: the address of left lidar usart handle
  40:modules/bluetooth/bluetooth.c ****  *       huart4: the address of right lidar usart handle
  41:modules/bluetooth/bluetooth.c ****  */
  42:modules/bluetooth/bluetooth.c **** static void BTRxCallback(UART_HandleTypeDef *huart, uint16_t size) // 串口接收回调_
  43:modules/bluetooth/bluetooth.c **** {
 139              		.loc 1 43 1 is_stmt 1 view -0
 140              		.cfi_startproc
 141              		@ args = 0, pretend = 0, frame = 0
 142              		@ frame_needed = 0, uses_anonymous_args = 0
 143              		.loc 1 43 1 is_stmt 0 view .LVU29
 144 0000 08B5     		push	{r3, lr}
 145              	.LCFI2:
 146              		.cfi_def_cfa_offset 8
 147              		.cfi_offset 3, -8
 148              		.cfi_offset 14, -4
  44:modules/bluetooth/bluetooth.c ****     bluetooth_buff_to_data();
 149              		.loc 1 44 5 is_stmt 1 view .LVU30
 150 0002 FFF7FEFF 		bl	bluetooth_buff_to_data
 151              	.LVL6:
  45:modules/bluetooth/bluetooth.c **** }
 152              		.loc 1 45 1 is_stmt 0 view .LVU31
 153 0006 08BD     		pop	{r3, pc}
 154              		.cfi_endproc
 155              	.LFE145:
 157              		.section	.text.Bluetooth_Init,"ax",%progbits
 158              		.align	1
 159              		.global	Bluetooth_Init
 160              		.syntax unified
 161              		.thumb
 162              		.thumb_func
 164              	Bluetooth_Init:
 165              	.LVL7:
 166              	.LFB147:
  46:modules/bluetooth/bluetooth.c **** 
  47:modules/bluetooth/bluetooth.c **** /**
  48:modules/bluetooth/bluetooth.c ****  * @brief
  49:modules/bluetooth/bluetooth.c ****  * @note
  50:modules/bluetooth/bluetooth.c ****  *
  51:modules/bluetooth/bluetooth.c ****  */
  52:modules/bluetooth/bluetooth.c **** static void MVLostCallback(void *id) // id is corresponding usart handle
  53:modules/bluetooth/bluetooth.c **** {
  54:modules/bluetooth/bluetooth.c ****     // memset(bluetooth_instance, 0, sizeof(bluetooth_instance));
  55:modules/bluetooth/bluetooth.c ****     USARTServiceInit(bluetooth_instance);
  56:modules/bluetooth/bluetooth.c **** }
  57:modules/bluetooth/bluetooth.c **** 
  58:modules/bluetooth/bluetooth.c **** BLUETOOTH_data_t *Bluetooth_Init(UART_HandleTypeDef *bluetooth_usart_handle)
  59:modules/bluetooth/bluetooth.c **** {
 167              		.loc 1 59 1 is_stmt 1 view -0
 168              		.cfi_startproc
 169              		@ args = 0, pretend = 0, frame = 16
 170              		@ frame_needed = 0, uses_anonymous_args = 0
 171              		.loc 1 59 1 is_stmt 0 view .LVU33
 172 0000 00B5     		push	{lr}
 173              	.LCFI3:
ARM GAS  C:\Users\blue\AppData\Local\Temp\cc4UiIWh.s 			page 5


 174              		.cfi_def_cfa_offset 4
 175              		.cfi_offset 14, -4
 176 0002 85B0     		sub	sp, sp, #20
 177              	.LCFI4:
 178              		.cfi_def_cfa_offset 24
  60:modules/bluetooth/bluetooth.c ****     USART_Init_Config_s conf;
 179              		.loc 1 60 5 is_stmt 1 view .LVU34
  61:modules/bluetooth/bluetooth.c ****     conf.module_callback = BTRxCallback;
 180              		.loc 1 61 5 view .LVU35
 181              		.loc 1 61 26 is_stmt 0 view .LVU36
 182 0004 094B     		ldr	r3, .L16
 183 0006 0393     		str	r3, [sp, #12]
  62:modules/bluetooth/bluetooth.c ****     conf.usart_handle = bluetooth_usart_handle;
 184              		.loc 1 62 5 is_stmt 1 view .LVU37
 185              		.loc 1 62 23 is_stmt 0 view .LVU38
 186 0008 0290     		str	r0, [sp, #8]
  63:modules/bluetooth/bluetooth.c ****     conf.recv_buff_size = bluetooth_FRAME_SIZE;
 187              		.loc 1 63 5 is_stmt 1 view .LVU39
 188              		.loc 1 63 25 is_stmt 0 view .LVU40
 189 000a 4623     		movs	r3, #70
 190 000c 8DF80430 		strb	r3, [sp, #4]
  64:modules/bluetooth/bluetooth.c ****     bluetooth_instance = USARTRegister(&conf);
 191              		.loc 1 64 5 is_stmt 1 view .LVU41
 192              		.loc 1 64 26 is_stmt 0 view .LVU42
 193 0010 01A8     		add	r0, sp, #4
 194              	.LVL8:
 195              		.loc 1 64 26 view .LVU43
 196 0012 FFF7FEFF 		bl	USARTRegister
 197              	.LVL9:
 198              		.loc 1 64 24 view .LVU44
 199 0016 064B     		ldr	r3, .L16+4
 200 0018 1860     		str	r0, [r3]
  65:modules/bluetooth/bluetooth.c **** 
  66:modules/bluetooth/bluetooth.c ****     memset(bluetooth_data->drought_buff, 0, sizeof(BLUETOOTH_data_t));
 201              		.loc 1 66 5 is_stmt 1 view .LVU45
 202              		.loc 1 66 26 is_stmt 0 view .LVU46
 203 001a 0020     		movs	r0, #0
 204              		.loc 1 66 5 view .LVU47
 205 001c 0060     		str	r0, [r0]	@ unaligned
 206 001e 4060     		str	r0, [r0, #4]	@ unaligned
 207 0020 8060     		str	r0, [r0, #8]	@ unaligned
 208 0022 C060     		str	r0, [r0, #12]	@ unaligned
 209 0024 0082     		strh	r0, [r0, #16]	@ unaligned
  67:modules/bluetooth/bluetooth.c ****     return bluetooth_data;
 210              		.loc 1 67 5 is_stmt 1 view .LVU48
  68:modules/bluetooth/bluetooth.c **** }
 211              		.loc 1 68 1 is_stmt 0 view .LVU49
 212 0026 05B0     		add	sp, sp, #20
 213              	.LCFI5:
 214              		.cfi_def_cfa_offset 4
 215              		@ sp needed
 216 0028 5DF804FB 		ldr	pc, [sp], #4
 217              	.L17:
 218              		.align	2
 219              	.L16:
 220 002c 00000000 		.word	BTRxCallback
 221 0030 00000000 		.word	.LANCHOR0
ARM GAS  C:\Users\blue\AppData\Local\Temp\cc4UiIWh.s 			page 6


 222              		.cfi_endproc
 223              	.LFE147:
 225              		.section	.bss.bluetooth_instance,"aw",%nobits
 226              		.align	2
 227              		.set	.LANCHOR0,. + 0
 230              	bluetooth_instance:
 231 0000 00000000 		.space	4
 232              		.text
 233              	.Letext0:
 234              		.file 2 "d:\\rm\\arm-gnu-toolchian\\arm-none-eabi\\include\\machine\\_default_types.h"
 235              		.file 3 "d:\\rm\\arm-gnu-toolchian\\arm-none-eabi\\include\\sys\\_stdint.h"
 236              		.file 4 "application/robot_def.h"
 237              		.file 5 "Drivers/CMSIS/Device/ST/STM32H7xx/Include/stm32h743xx.h"
 238              		.file 6 "d:\\rm\\arm-gnu-toolchian\\lib\\gcc\\arm-none-eabi\\10.3.1\\include\\stddef.h"
 239              		.file 7 "Drivers/STM32H7xx_HAL_Driver/Inc/stm32h7xx_hal_def.h"
 240              		.file 8 "Drivers/STM32H7xx_HAL_Driver/Inc/stm32h7xx_hal_dma.h"
 241              		.file 9 "Drivers/STM32H7xx_HAL_Driver/Inc/stm32h7xx_hal_uart.h"
 242              		.file 10 "modules/bluetooth/bluetooth.h"
 243              		.file 11 "bsp/usart/bsp_usart.h"
ARM GAS  C:\Users\blue\AppData\Local\Temp\cc4UiIWh.s 			page 7


DEFINED SYMBOLS
                            *ABS*:00000000 bluetooth.c
C:\Users\blue\AppData\Local\Temp\cc4UiIWh.s:19     .text.bluetooth_buff_to_data:00000000 $t
C:\Users\blue\AppData\Local\Temp\cc4UiIWh.s:25     .text.bluetooth_buff_to_data:00000000 bluetooth_buff_to_data
C:\Users\blue\AppData\Local\Temp\cc4UiIWh.s:126    .text.bluetooth_buff_to_data:00000064 $d
C:\Users\blue\AppData\Local\Temp\cc4UiIWh.s:131    .text.BTRxCallback:00000000 $t
C:\Users\blue\AppData\Local\Temp\cc4UiIWh.s:136    .text.BTRxCallback:00000000 BTRxCallback
C:\Users\blue\AppData\Local\Temp\cc4UiIWh.s:158    .text.Bluetooth_Init:00000000 $t
C:\Users\blue\AppData\Local\Temp\cc4UiIWh.s:164    .text.Bluetooth_Init:00000000 Bluetooth_Init
C:\Users\blue\AppData\Local\Temp\cc4UiIWh.s:220    .text.Bluetooth_Init:0000002c $d
C:\Users\blue\AppData\Local\Temp\cc4UiIWh.s:226    .bss.bluetooth_instance:00000000 $d
C:\Users\blue\AppData\Local\Temp\cc4UiIWh.s:230    .bss.bluetooth_instance:00000000 bluetooth_instance

UNDEFINED SYMBOLS
USARTRegister
